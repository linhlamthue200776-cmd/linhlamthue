<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thi tr·∫Øc nghi·ªám</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 15px;
  font-size: 18px;
}

.container {
  max-width: 100%;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
}

h2 {
  font-size: 20px;
}

.answer {
  border: 1px solid #ccc;
  padding: 15px;
  margin: 12px 0;
  border-radius: 8px;
  cursor: pointer;
}

.answer:active {
  background: #eef;
}

.correct {
  background: #c8f7c5;
  border-color: green;
}

.wrong {
  background: #f7c5c5;
  border-color: red;
}

.buttons {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

button {
  flex: 1;
  padding: 15px;
  font-size: 18px;
  border-radius: 8px;
  border: none;
  background: #3498db;
  color: white;
}

button:active {
  background: #2980b9;
}

.reset {
  background: #e67e22;
}

.reset:active {
  background: #d35400;
}

#score {
  margin-top: 15px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="container">
  <h2 id="question"></h2>
  <div id="answers"></div>

  <div class="buttons">
    <button onclick="prevQuestion()">‚¨Ö C√¢u tr∆∞·ªõc</button>
    <button onclick="nextQuestion()">C√¢u ti·∫øp ‚û°</button>
    <button class="reset" onclick="resetQuiz()">üîÑ L√†m l·∫°i</button>
  </div>

  <div id="score"></div>
</div>

<script>
// ================== D·ªÆ LI·ªÜU ==================
const questions = [
  {
    q: "2 + 2 = ?",
    a: ["3", "4", "5", "6"],
    c: 1
  },
  {
    q: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√†?",
    a: ["H√† N·ªôi", "Hu·∫ø", "ƒê√† N·∫µng", "TP.HCM"],
    c: 0
  }
];

// ================== BI·∫æN ==================
let index = 0;
let score = 0;
let quizQuestions = [];
let userAnswers = [];

// ================== TR·ªòN ==================
function shuffle(array) {
  return array
    .map(v => ({ v, r: Math.random() }))
    .sort((a, b) => a.r - b.r)
    .map(x => x.v);
}

// ================== KH·ªûI T·∫†O ==================
function startQuiz() {
  index = 0;
  score = 0;
  userAnswers = [];

  quizQuestions = shuffle([...questions]).map(q => {
    const answers = q.a.map((text, i) => ({
      text,
      index: i,
      isCorrect: i === q.c
    }));

    return {
      ...q,
      mixedAnswers: shuffle(answers)
    };
  });

  loadQuestion();
}

// ================== LOAD C√ÇU ==================
function loadQuestion() {
  const q = quizQuestions[index];

  document.getElementById("question").innerText =
    `C√¢u ${index + 1}/${quizQuestions.length}: ${q.q}`;

  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";

  q.mixedAnswers.forEach(ans => {
    const div = document.createElement("div");
    div.className = "answer";
    div.innerText = ans.text;

    if (userAnswers[index] !== undefined) {
      if (ans.isCorrect) div.classList.add("correct");
      if (ans.index === userAnswers[index] && !ans.isCorrect)
        div.classList.add("wrong");
    } else {
      div.onclick = () => checkAnswer(div, ans);
    }

    answersDiv.appendChild(div);
  });

  updateScore();
}

// ================== CH·ªåN ƒê√ÅP √ÅN ==================
function checkAnswer(element, ans) {
  if (userAnswers[index] !== undefined) return;

  userAnswers[index] = ans.index;

  const all = document.querySelectorAll(".answer");
  all.forEach(a => a.onclick = null);

  if (ans.isCorrect) {
    element.classList.add("correct");
    score++;
  } else {
    element.classList.add("wrong");
    all.forEach(a => {
      if (a.innerText === quizQuestions[index].a[quizQuestions[index].c]) {
        a.classList.add("correct");
      }
    });
  }

  updateScore();
}

// ================== ƒêI·ªÄU H∆Ø·ªöNG ==================
function nextQuestion() {
  if (index < quizQuestions.length - 1) {
    index++;
    loadQuestion();
  } else {
    alert(`üéâ Ho√†n th√†nh!\nS·ªë c√¢u ƒë√∫ng: ${score}/${quizQuestions.length}`);
  }
}

function prevQuestion() {
  if (index > 0) {
    index--;
    loadQuestion();
  }
}

// ================== L√ÄM L·∫†I ==================
function resetQuiz() {
  if (!confirm("B·∫°n c√≥ ch·∫Øc mu·ªën l√†m l·∫°i t·ª´ ƒë·∫ßu?")) return;
  startQuiz();
}

// ================== ƒêI·ªÇM ==================
function updateScore() {
  document.getElementById("score").innerText =
    `‚úÖ ƒê√∫ng: ${score} / ${quizQuestions.length}`;
}

// ================== CH·∫†Y ==================
startQuiz();
</script>

</body>
</html>

